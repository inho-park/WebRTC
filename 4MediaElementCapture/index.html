<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>audio엘리먼트 mediaStream</title>
</head>
<body>

    <!-- 오디오 파일을 재생-->
    <audio id="audioFile" src="./sample_audio.mp3">파일 재생용(컨트롤X)</audio>
    
    <!-- mediaStream으로 받아서 동시 재생 -->
    <audio id="audioStream" controls>MediaStream 취득 재생용(컨트롤O)</audio>
    
    <button id="btnStart">시작</button>

</body>
<script>
    // <audio> 요소
    const $audioFile = document.getElementById("audioFile");
    const $audioStream = document.getElementById("audioStream");

    // <button> 요소
    const $button = document.getElementById("btnStart");

    // 버튼 클릭시, 오디오 파일을 재생, 스트림을 취득하여 동시 재생
    $button.onclick = (event)=>{
        // 오디오 파일 재생: 오디오가 재생 중이어야 스트림이 나옴
        $audioFile.play();
            
        // 재생 중인 mediaStream 취득
        const mediaStream = $audioFile.captureStream();

        // 다른 오디오 태그에서 mediaStream을 받아서 동시 재생 처리
        $audioStream.srcObject = mediaStream;
        $audioStream.play();
    }


</script>
</html>